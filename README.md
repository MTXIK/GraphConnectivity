# GraphConnectivity

## Описание

Данная программа реализует **анализ связности** неориентированного графа с использованием **матрицы смежности**. Программа выполняет следующие задачи:

1. **Определение мостов и точек сочленения** в графе с помощью алгоритма Тарьяна.
2. **Поиск компонент двусвязности**, то есть максимальных подграфов, в которых любая пара вершин связана минимум двумя различными путями.
3. **Нахождение компонент связности**, то есть максимальных подграфов, в которых любая пара вершин связана хотя бы одним путём.

Программа считывает граф из бинарного файла, содержащего матрицу смежности, и выводит результаты анализа в текстовый файл.

## Требования

- **Компилятор Go**: Версия 1.13 или выше.
- **Операционная система**: Windows, Linux, macOS или любая другая ОС с поддержкой Go.

## Сборка

1. **Скачайте исходный код** программы и сохраните его в файл, например, `graph_connectivity.go`.

2. **Установите Go**, если он ещё не установлен. Следуйте официальной [инструкции по установке Go](https://golang.org/doc/install).

3. **Откройте терминал** или командную строку и перейдите в директорию с исходным кодом.

4. **Скомпилируйте программу** с помощью команды `go build`:

   ```bash
   go build -o graph_connectivity graph_connectivity.go
   ```

   Где `graph_connectivity.go` — имя файла с исходным кодом, а `graph_connectivity` — имя создаваемого исполняемого файла.

## Использование

Запустите программу, передав в качестве обязательного аргумента имя входного бинарного файла. Опционально можно указать имя выходного файла с помощью ключа `-o`. Если имя выходного файла не указано, результаты записываются в файл `output.txt` по умолчанию.

### Синтаксис

```bash
./graph_connectivity <input_file.bm> [-o <output_file.txt>]
```

- `<input_file.bm>`: Имя входного бинарного файла, содержащего матрицу смежности графа.
- `-o <output_file.txt>`: (Опционально) Имя выходного текстового файла. Если ключ `-o` не указан, результаты записываются в файл `output.txt` по умолчанию.

### Пример использования

**Без указания выходного файла (результаты будут записаны в `output.txt`):**

```bash
./graph_connectivity graph.bm
```

**С указанием выходного файла:**

```bash
./graph_connectivity graph.bm -o results.txt
```

### Интерфейс пользователя

После запуска программы, она автоматически считывает граф из указанного файла и выполняет анализ связности. Результаты записываются в выходной файл в следующем формате:

```
a) Мосты и точки сочленения:
Точки сочленения:
<vertex1> <vertex2> ...

Мосты:
(u1, v1) (u2, v2) ...

b) Компоненты двусвязности:
Компонента 1:
(u1, v1) (u2, v2) ...

Компонента 2:
(u3, v3) (u4, v4) ...
...

c) Компоненты связности:
Компонента 1: <vertex1> <vertex2> ...
Компонента 2: <vertex3> <vertex4> ...
...
```

## Формат входного файла

Входной файл должен быть бинарным и содержать матрицу смежности графа с 16-битными целыми числами (`int16`). Структура файла следующая:

1. **Первое число (`int16`)**: Размер матрицы `n` (количество вершин в графе).
2. **Далее следует `n x n` чисел (`int16`)**: Элементы матрицы смежности. Если элемент равен `0`, предполагается отсутствие ребра между соответствующими вершинами.

### Пример создания бинарного файла

Вот пример того, как можно создать бинарный файл с матрицей смежности на языке Go:

```go
package main

import (
	"encoding/binary"
	"fmt"
	"os"
)

func main() {
	size := int16(5) // Размер матрицы (5 вершин)

	// Матрица смежности (5x5)
	// Пример графа:
	// 0 - 1, 0 - 2
	// 1 - 2, 1 - 3
	// 2 - 3, 2 - 4
	// 3 - 4
	matrix := []int16{
		0, 1, 1, 0, 0, // Вершина 0 соединена с 1 и 2
		1, 0, 1, 1, 0, // Вершина 1 соединена с 0, 2 и 3
		1, 1, 0, 1, 1, // Вершина 2 соединена с 0, 1, 3 и 4
		0, 1, 1, 0, 1, // Вершина 3 соединена с 1, 2 и 4
		0, 0, 1, 1, 0, // Вершина 4 соединена с 2 и 3
	}

	file, err := os.Create("graph.bm") // Создаём бинарный файл
	if err != nil {
		fmt.Println("Не удалось создать файл:", err)
		return
	}
	defer file.Close()

	// Записываем размер матрицы
	err = binary.Write(file, binary.LittleEndian, size)
	if err != nil {
		fmt.Println("Не удалось записать размер матрицы:", err)
		return
	}

	// Записываем матрицу смежности
	for _, val := range matrix {
		err = binary.Write(file, binary.LittleEndian, val)
		if err != nil {
			fmt.Println("Не удалось записать матрицу смежности:", err)
			return
		}
	}

	fmt.Println("Бинарный файл graph.bm успешно создан.")
}
```

Этот код создаст бинарный файл `graph.bm`, содержащий граф с 5 вершинами и заданными ребрами.

## Формат выходного файла

Выходной файл представляет собой текстовый файл, содержащий следующую информацию:

### a) Мосты и точки сочленения

```
a) Мосты и точки сочленения:
Точки сочленения:
<vertex1> <vertex2> ...

Мосты:
(u1, v1) (u2, v2) ...
```

- **Точки сочленения**: Вершины, удаление которых увеличивает количество компонент связности.
- **Мосты**: Рёбра, удаление которых увеличивает количество компонент связности.

### b) Компоненты двусвязности

```
b) Компоненты двусвязности:
Компонента 1:
(u1, v1) (u2, v2) ...

Компонента 2:
(u3, v3) (u4, v4) ...
...
```

- **Компоненты двусвязности**: Максимальные подграфы, в которых любая пара вершин связана минимум двумя различными путями.

### c) Компоненты связности

```
c) Компоненты связности:
Компонента 1: <vertex1> <vertex2> ...
Компонента 2: <vertex3> <vertex4> ...
...
```

- **Компоненты связности**: Максимальные подграфы, в которых любая пара вершин связана хотя бы одним путём.

### Пример выходного файла

```
a) Мосты и точки сочленения:
Точки сочленения:
1 2

Мосты:
(1, 3) (2, 4)

b) Компоненты двусвязности:
Компонента 1:
(0, 1) (1, 2) 
Компонента 2:
(1, 3) (2, 3) (2, 4) 

c) Компоненты связности:
Компонента 1: 0 1 2 3 4 
```

## Функциональность

- **Чтение из файла**: Программа открывает бинарный файл, считывает размер матрицы и саму матрицу смежности графа.
  
- **Преобразование матрицы смежности в список смежности**: Для удобства дальнейшей обработки граф преобразуется из матрицы смежности в список смежности.

- **Поиск мостов и точек сочленения**: Используется алгоритм Тарьяна для определения мостов и точек сочленения в графе.

- **Поиск компонент двусвязности**: Алгоритм Тарьяна также используется для разделения графа на компоненты двусвязности.

- **Поиск компонент связности**: Простой обход в глубину (DFS) используется для определения компонент связности графа.

- **Запись результатов**: Результаты анализа (мосты, точки сочленения, компоненты двусвязности и связности) записываются в указанный выходной файл в текстовом формате.

- **Освобождение памяти**: Программа корректно освобождает используемую память после завершения работы.

## Алгоритмы

### Алгоритм Тарьяна

Алгоритм Тарьяна используется для нахождения мостов и точек сочленения в графе. Он основан на глубоком обходе графа и вычислении временных меток обнаружения и низших значений для каждой вершины.

### Компоненты двусвязности

Компоненты двусвязности — это максимальные подграфы, в которых любая пара вершин связана минимум двумя различными путями. Они определяются с помощью модификации алгоритма Тарьяна, который использует стек для отслеживания рёбер текущей компоненты.

### Компоненты связности

Компоненты связности — это максимальные подграфы, в которых любая пара вершин связана хотя бы одним путём. Они находят с помощью простого обхода в глубину (DFS).

## Тесты

Тестовые файлы находятся в папке `tests`. В этой папке вы найдете примеры бинарных файлов с графами различных типов, включая графы с мостами, точками сочленения, различными компонентами двусвязности и связности. Эти тесты помогут проверить корректность работы программы.

### Пример использования тестов

1. **Перейдите в папку с тестами:**

   ```bash
   cd tests
   ```

2. **Запустите программу с одним из тестовых файлов:**

   ```bash
   ../graph_connectivity test1.bm -o result1.txt
   ```

3. **Просмотрите результаты в выходном файле:**

   ```bash
   cat result1.txt
   ```

## Пример использования

### Создание бинарного файла

Используйте приведённый ниже пример на Go для создания бинарного файла `graph.bm`.

```go
package main

import (
	"encoding/binary"
	"fmt"
	"os"
)

func main() {
	size := int16(5) // Размер матрицы (5 вершин)

	// Матрица смежности (5x5)
	// Пример графа:
	// 0 - 1, 0 - 2
	// 1 - 2, 1 - 3
	// 2 - 3, 2 - 4
	// 3 - 4
	matrix := []int16{
		0, 1, 1, 0, 0, // Вершина 0 соединена с 1 и 2
		1, 0, 1, 1, 0, // Вершина 1 соединена с 0, 2 и 3
		1, 1, 0, 1, 1, // Вершина 2 соединена с 0, 1, 3 и 4
		0, 1, 1, 0, 1, // Вершина 3 соединена с 1, 2 и 4
		0, 0, 1, 1, 0, // Вершина 4 соединена с 2 и 3
	}

	file, err := os.Create("graph.bm") // Создаём бинарный файл
	if err != nil {
		fmt.Println("Не удалось создать файл:", err)
		return
	}
	defer file.Close()

	// Записываем размер матрицы
	err = binary.Write(file, binary.LittleEndian, size)
	if err != nil {
		fmt.Println("Не удалось записать размер матрицы:", err)
		return
	}

	// Записываем матрицу смежности
	for _, val := range matrix {
		err = binary.Write(file, binary.LittleEndian, val)
		if err != nil {
			fmt.Println("Не удалось записать матрицу смежности:", err)
			return
		}
	}

	fmt.Println("Бинарный файл graph.bm успешно создан.")
}
```

Этот код создаст бинарный файл `graph.bm`, содержащий граф с 5 вершинами и заданными ребрами.

### Запуск программы

```bash
./graph_connectivity graph.bm -o results.txt
```

### Пример вывода в `results.txt`

```
a) Мосты и точки сочленения:
Точки сочленения:
1 2

Мосты:
(1, 3) (2, 4)

b) Компоненты двусвязности:
Компонента 1:
(0, 1) (1, 2) 
Компонента 2:
(1, 3) (2, 3) (2, 4) 

c) Компоненты связности:
Компонента 1: 0 1 2 3 4 
```